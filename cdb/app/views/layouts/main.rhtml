<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <title>Charakterverwaltung</title>
  <link rel="stylesheet" href="/stylesheets/main.css" type="text/css">
  <link rel="stylesheet" href="/stylesheets/scaffold.css" type="text/css">
  <%= javascript_include_tag("jquery", "jquery.interface.js") %>
  <%= javascript_include_tag(:defaults) %>
  <script type="text/javascript">
	jQuery.noConflict();
  </script>
</head>
<body>
<table class="main" style="width:100%">
<tr><td class="menue">
<%= get_user.nil? ? "Nicht eingelogged, " + link_to("Einloggen", :controller => 'account', :action => 'login') :
  "Eingelogged als " + get_user.account + ", " + 
  link_to( "Ausloggen", :controller => 'account', :action => 'logout') %>
<br>

<%= link_to_if get_user, "Account-Details", :controller => "account", :action => "details" %>&nbsp;
* <%= link_to_if (get_user && get_user.details?), "<b>Char-Liste</b>", :controller => "character", :action => "index" %>&nbsp;
* <%= link_to_if (get_user && get_user.details?), "Schach", :controller => 'chess', :action => 'index' %>&nbsp;
* <%= link_to_if amask(Account::AMASK_CAN_CHANGE_WEATHER), "Weather", :controller => 'weather', :action => 'index' %>&nbsp;
* <%= link_to_if amask(Account::AMASK_CAN_SEE_ALL_MENTORS), "MentorData", :controller => 'stat', :action => 'mentor' %>&nbsp;
* <%= link_to_if amask(Account::AMASK_CAN_SEE_ALL_CHARACTERS), "TimeXP", :controller => 'stat', :action => 'time_xp' %>&nbsp;
* <%= link_to_if amask(Account::CAN_SEE_GV), "Settings", :controller => 'set', :action => 'index' %>
* <%= link_to_if amask(Account::SEE_ALL_CHARACTERS), "LPH Toplist", :controller => 'stat', :action => 'lph_toplist' %>
* <%= link_to_if amask(Account::CAN_SEE_LOOT_CHAINS), "Loot Chains", :controller => 'loot_chains', :action => 'index' %>
<br>

ObjectAdmin:
<%= link_to_if amask(Account::CAN_SET_PERSISTENCY), "PersistentObject", :controller => 'persistent_objects', :action => 'index' %>&nbsp;
* <%= link_to_if amask(Account::CAN_SET_PERSISTENCY), "SceneDescriptions", :controller => 'scene_descriptions', :action => 'index' %>&nbsp;
* <%= link_to_if amask(Account::CAN_SEE_RIDEABLES), "Rideables", :controller => 'rideables', :action => 'index' %>&nbsp;
<br>

Audit:
<%= link_to_if amask(Account::CAN_SEE_CHATLOGS), "Chatlogs", :controller => 'chatlog', :action => 'index' %>&nbsp;
* <%= link_to_if amask(Account::CAN_SEE_AUDIT_TRAILS), "Audit", :controller => "audit", :action => 'index' %>&nbsp;
<br>

Craft:
<%= link_to_if amask(Account::CAN_SEE_CRAFTING), "Crafting-DB", :controller => 'craft', :action => 'index' %>&nbsp;
* <%= link_to_if amask(Account::CAN_SEE_MERCHANTS), "Merchants", :controller => 'merchant', :action => 'index' %>&nbsp;
* <%= link_to_if amask(Account::CAN_SEE_CRAFTING), "SpellCalc", :controller => 'craft', :action => 'spell' %>&nbsp;
* <%= link_to_if false, "EnchantCalc", :controller => 'craft', :action => 'enchant' %>&nbsp;

<br>
<% if flash[:notice] %>
  <% if !flash[:error] %>
    <font color="green"><i><%=flash[:notice]-%></i></font><br>
  <% end; if flash[:error] %>
    <font color="red"><i><%=flash[:notice]-%></i></font><br>
  <% end %>
  <font color="red"><% flash[:errors].each_full do |e| %>
  <%= e %><br>
  <% end if flash[:errors] %></font>
<% end %>
</td>

<td width="250px" align="center" valign="middle" style="empty-cells: show; vertical-align: middle;">
<% if amask(Account::SEE_ALL_CHARACTERS) %>
<%= link_to "all", {:controller => 'character', :action => 'index', } %>
<%= link_to "<i>online</i>", {:controller => 'character', :action => 'index', :onlineonly => 1} %>
<%= link_to "<b>register</b>", {:controller => 'character', :action => 'index', :search => 'register'} %>
<%= link_to "wait", {:controller => 'character', :action => 'index', :search => 'register_accept_wait'} %>
<%= link_to "accept", {:controller => 'character', :action => 'index', :search => 'accept'} %>
<%= link_to "reject", {:controller => 'character', :action => 'index', :search => 'reject'} %>
<%= form_tag({:controller => 'character', :action => 'index'},{:method => 'get'}) %>
<input type="checkbox" id="onlineonly" name="onlineonly" value="1" title="Nur online" <%= "checked='checked'" if @onlineonly == "1" %>>
<input type="text" id="search" name="search" size="20" value="<%= @search %>">
<%= submit_tag("Go") + end_form_tag %>
<%= link_to get_user.account, {:controller => 'character', :action => 'index', :search => get_user.account } %>
<% else %>
<h1>Willkommen!</h1>
<% end %>
</td>
</tr>
</table>

<table class="main" style="width:100%; height: 100%">
<tr><td class="content">
<%= @content_for_layout -%>
</td></tr>
</table>
<% 
  if amask(Account::CAN_SEE_AUDIT_TRAILS)
%>
<hr>
<%= debug(params) %>
<hr>
<%= debug(@debug) %>
<hr>
<%= debug(ActionMailer::Base.deliveries[-1]) %>
<%
end
%>

</body>
</html>
